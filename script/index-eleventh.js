const mainMenu = [
    {
        title: 'Home',
        link: '#',
    },
    {
        title: 'About',
        link: '#',
    },
    {
        title: 'Categories',
        link: '#',
    },
    {
        title: 'Contacts',
        link: '#',
    },
]

const sliderContent = [
    {
        picture: "./img/promo1.jpg",
        pictureSmall: "./img/promo1small.jpg",
        link: "#",
        title: "Halloween",
        text: "Halloween comes but once a year, and the event is a howling money-maker for confectionary, costume, and retail and online stores. Sales abound as retailers take advantage of this spooktacular tradition to offer all types of Halloween sales. Listen to the Duke Morgan Voice Over demo to see how retailers used his acting ability to scare up new traffic and sales.",
    },
    {
        picture: "./img/promo2.jpg",
        pictureSmall: "./img/promo2small.jpg",
        link: "#",
        title: "Приватбанк",
        text: "Приватбанк — крупнейший банк Украины. Занимает лидирующие позиции по всем финансовым показателям в отрасли.",
    },
    {
        picture: "./img/promo3.jpg",
        pictureSmall: "./img/promo3small.jpg",
        link: "#",
        title: "Gepur",
        text: "Добро пожаловать в GEPUR! Мы украинская компания-производитель женской одежды, история которой берет свое начало с 2010 года.",
    },
    {
        picture: "./img/promo4.jpg",
        pictureSmall: "./img/promo4small.jpg",
        link: "#",
        title: "Rozetka",
        text: "Розе́тка — украинский интернет-магазин и маркетплейс, появившийся в 2005 году. Имеет отделения в Киеве, Одессе, Львове, Житомире и в Броварах",
    },
    {
        picture: "./img/promo5.jpg",
        pictureSmall: "./img/promo5small.jpg",
        link: "#",
        title: "Шини",
        text: "Легко підібрати, легко придбати. Високоякісні шини від виробників. Допоможемо обрати краще. Різноманітний вибір. Сертифікована продукція. Гарантія якості. ",
    },
    {
        picture: "./img/promo6.jpg",
        pictureSmall: "./img/promo6small.jpg",
        link: "#",
        title: "Delivery",
        text: "We also understand the importance of keeping it fresh and hot, which is why our delivery partners ensure your food reaches you in perfect condition.",
    },
    {
        picture: "./img/promo7.jpg",
        pictureSmall: "./img/promo7small.jpg",
        link: "#",
        title: "Whirpool",
        text: "Whirlpool Corporation — американская компания, основанная братьями Фредом и Луи Аптоном в 1911 году в штате Мичиган.",
    },
]

const accordionElements = [
    {
        title: 'Promo',
        text: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid nulla eius, reiciendis magnam, totam animi officiis, illum quasi iusto',
    },
    {
        title: 'Promo',
        text: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid nulla eius, reiciendis magnam, totam animi officiis, illum quasi iusto',
    },
    {
        title: 'Promo',
        text: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid nulla eius, reiciendis magnam, totam animi officiis, illum quasi iusto',
    },
]   

const content = [
    {
        title: 'first',
        paragraph: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid nulla eius, reiciendis magnam, totam animi officiis, illum quasi iusto nisi doloremque maxime doloribus sapiente officia natus sed. Dolorum architecto accusamus repellat qui quam illo quis explicabo perferendis optio, voluptate quae.',
        hiddenContent: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid nulla eius, reiciendis magnam, totam animi officiis, illum quasi iusto nisi doloremque maxime doloribus sapiente officia natus sed. Dolorum architecto accusamus repellat qui quam illo quis explicabo perferendis optio, voluptate quae.'
    },
    {   title: 'second',
        paragraph: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid nulla eius, reiciendis magnam, totam animi officiis, illum quasi iusto nisi doloremque maxime doloribus sapiente officia natus sed. Dolorum architecto accusamus repellat qui quam illo quis explicabo perferendis optio, voluptate quae.',
        hiddenContent: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid nulla eius, reiciendis magnam, totam animi officiis, illum quasi iusto nisi doloremque maxime doloribus sapiente officia natus sed. Dolorum architecto accusamus repellat qui quam illo quis explicabo perferendis optio, voluptate quae.'
    },
    {   title: 'third',
        paragraph: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid nulla eius, reiciendis magnam, totam animi officiis, illum quasi iusto nisi doloremque maxime doloribus sapiente officia natus sed. Dolorum architecto accusamus repellat qui quam illo quis explicabo perferendis optio, voluptate quae.',
        hiddenContent: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid nulla eius, reiciendis magnam, totam animi officiis, illum quasi iusto nisi doloremque maxime doloribus sapiente officia natus sed. Dolorum architecto accusamus repellat qui quam illo quis explicabo perferendis optio, voluptate quae.'
    },
]

const products = [
    {   
        href: '#',
        comments: '#1',
        commentsAmount: "123"  + "&nbsp;" + "отзыва",
        title: "Ноутбук ASUS TUF Gaming A15 (2023) FA507NV-LP031",
        src: "./img/ASUSTUFGamingA15.webp",
        alt: "",
        price: "59" + "&nbsp;" + "999",
        currentPrice: "51 999",
        promotion: "акция",
        deliveryStatus: "Готов" + "&nbsp;" + "к" + "&nbsp;" + "отправке",
    },
    {
        href: "#",
        comments: "#1",
        commentsAmount: "45" + "&nbsp;" + "отзывов",
        title: 'Ноутбук Acer Aspire 7 A715-43G-R92H (NH.QHHEU.00G) Charcoal Black',
        src: "./img/acerAspire7.webp",
        alt: "",
        price: "39" + "&nbsp;" + "999",
        currentPrice: "34 999",
        promotion: "акция",
        deliveryStatus: "",
    },
    {
        href: "#",
        comments: "#1",
        commentsAmount: "64" + "&nbsp;" + "отзыва",
        title: "Ноутбук Apple MacBook Air 13 M1 8/256GB 2020 (MGN63) Space Gray",
        src: "./img/MacBookAir13.webp",
        alt: "",
        price: "",
        currentPrice: "36 999",
        promotion: "",
        deliveryStatus: "Готов" + "&nbsp;" + "к" + "&nbsp;" + "отправке",
    },
    {
        href: "#",
        comments: "#1",
        commentsAmount: "35" + "&nbsp;" + "отзывов",
        title: "Ноутбук Lenovo IdeaPad Gaming 3 15IHU6 (82K10190RA) Shadow Black",
        src: "./img/LenovoIdeaPadGaming3.webp",
        alt: "",
        price: "39" + "&nbsp;" + "999",
        currentPrice: "32 999",
        promotion: "акция",
        deliveryStatus: "Готов" + "&nbsp;" + "к" + "&nbsp;" + "отправке",
    },
    {   
        href: '#',
        comments: '#1',
        commentsAmount: "123"  + "&nbsp;" + "отзыва",
        title: "Ноутбук ASUS TUF Gaming A15 (2023) FA507NV-LP031",
        src: "./img/ASUSTUFGamingA15.webp",
        alt: "",
        price: "59" + "&nbsp;" + "999",
        currentPrice: "51 999",
        promotion: "акция",
        deliveryStatus: "Готов" + "&nbsp;" + "к" + "&nbsp;" + "отправке",
    },
    {
        href: "#",
        comments: "#1",
        commentsAmount: "45" + "&nbsp;" + "отзывов",
        title: 'Ноутбук Acer Aspire 7 A715-43G-R92H (NH.QHHEU.00G) Charcoal Black',
        src: "./img/acerAspire7.webp",
        alt: "",
        price: "39" + "&nbsp;" + "999",
        currentPrice: "34 999",
        promotion: "акция",
        deliveryStatus: "",
    },
]

const menu = document.querySelector('.main-menu');
const sliderSlides = document.querySelector('.slider-slides');
const dots = document.querySelector('.dots');
const btnPrev = document.querySelector('.slider-buttons__button_prev');
const btnNext = document.querySelector('.slider-buttons__button_next');
const box = document.querySelector('.box');
const productList = document.querySelector('.product-list');
const contentDiv = document.querySelector('.content');
const showContent = document.querySelector('.show-content');

const mainMenuList = mainMenu.map(function (item) {
    return `
        <li class = "menu-element">
            <a class = "menu-element__link" href = ${item.link}>
                ${item.title}
            </a>
        </li>
    `
}).join('');

const sliderList = sliderContent.map(function(item) {
    return `
        <a class = "slide" href = ${item.link}>
            <div class = "slide__img">
                <img class = "slide__image slide__image_small" src = ${item.pictureSmall} alt = "">
                <img class = "slide__image slide__image_big" src = ${item.picture} alt = "">
            </div>
            <div class = "slide-content">
                <h3 class = "slide-content__title">${item.title}</h3>
                <p class = "slide-content__text">
                    ${item.text}
                </p>
            </div>
        </a>
    `
}).join('');

const accordionStructure = accordionElements.map(function(item) {
    return `
        <div class = "box-item">
            <button class = "accordion-button">
                <i class="fa-solid fa-plus"></i>
            </button>
            <h2 class = "box-item__title">ACCORDION</h2>
            <div class = "accordion-block">
                <h2 class = "accordion-block__title">${item.title}</h2>
                <div class = "accordion-block__text">
                    ${item.text}
                </div>
            </div>
        </div>
    `
}).join('')

const contentBlocks = content.map(function(item) {
    return `
    <div class = "paragraph-block">
        <h3 class = "paragraph-block__title">${item.title}</h3>
        <p class = "paragraph-block__text">
            ${item.paragraph}
        </p>
        <p class = "paragraph-block__text paragraph-block__text_hidden">
            ${item.hiddenContent}
        </p>
        <button class = "paragpaph-block__button"> read more </button>
    </div>
    `
}).join('');


const productListElem = products.map(function (item) {
    return `
        <div class = "product-list-elem">
            <span class = "promotion">
                ${item.promotion}
            </span>
            <button class = "add-to-favorites">
                <i class = "add-to-favorites__icon fa-regular fa-heart"></i>
            </button>
            <button class = "add-to-compare">
                <i class="add-to-comapare__icon fa-solid fa-scale-balanced"></i>
            </button>
            <a class = "product-picture" href = ${item.href}>
                <img class= "product-picture__img" src = ${item.src} alt = ${item.alt}>
            </a>
            <h3 class = "product-title">
                <a class = "product-list__link" href = ${item.href}>
                ${item.title}
                </a>
            </h3>
            <div class = "product-rates">
                <a class = "stars" href = ${item.comments} data-comments = ${item.commentsAmount}></a>
            </div>
            <div class = "product-info">
                <span class = "product-info__price" data-actual = ${item.price}>
                    ${item.currentPrice}
                </span>
                <button class = "product-info__order">
                    <i class="fa-solid fa-cart-shopping"></i>
                </button>
            </div>
            <span class = "delivery-status">
                ${item.deliveryStatus}
            </span>
        </div>
    `
}).join('');

menu.innerHTML = mainMenuList;
sliderSlides.innerHTML = sliderList;
box.innerHTML = accordionStructure;
productList.innerHTML = productListElem;
contentDiv.innerHTML = contentBlocks;

const btn = document.querySelectorAll('.paragpaph-block__button');
const accordionButton = document.querySelectorAll('.accordion-button');
const accordionBlock = document.querySelectorAll('.accordion-block');
const hiddenContent = document.querySelectorAll('.paragraph-block__text_hidden');
const slides = document.querySelectorAll('.slide');

dots.innerHTML = dotsPerElem(slides);

const allDots = document.querySelectorAll('.dots__button');

let btnIndex = 0;

initActiveElem(slides[0]);
initActiveElem(allDots[0]);


allDots.forEach(function(item, dotIndex) {
    item.onclick = function() {
        allDots.forEach(function(classDots){
            classDots.classList.remove('dots__button_active')
        })

        allDots[dotIndex].classList.add('dots__button_active');

        slides.forEach(function(classDots){
            classDots.classList.remove('slide_active')
        })

        slides[dotIndex].classList.add('slide_active');

        btnIndex = dotIndex;
    }
})

btnNext.onclick = function() {
    slides[btnIndex].classList.remove('slide_active');
    allDots[btnIndex].classList.remove('dots__button_active');
    
    btnIndex = (btnIndex + 1) % slides.length;

    slides[btnIndex].classList.add('slide_active');
    allDots[btnIndex].classList.add('dots__button_active');
}

btnPrev.onclick = function() {
    slides[btnIndex].classList.remove('slide_active');
    allDots[btnIndex].classList.remove('dots__button_active');

    btnIndex = (btnIndex - 1 + slides.length) % slides.length;

    slides[btnIndex].classList.add('slide_active');
    allDots[btnIndex].classList.add('dots__button_active');
}

accordionButton.forEach(function(item, index) {

    item.onclick = function() {
        if (item.className.includes('accordion-button_active')) {

            item.classList.remove('accordion-button_active');
            item.innerHTML = '<i class="fa-solid fa-plus"></i>';
            accordionBlock[index].classList.remove('accordion-block_visible');

            return;
        }

        accordionBlock.forEach(function (el) {
            el.classList.remove('accordion-block_visible');
        })

        accordionButton.forEach(function(btn) {
            btn.classList.remove('accordion-button_active');
            btn.innerHTML = '<i class="fa-solid fa-plus"></i>'
        })


        item.innerHTML = '<i class="fa-solid fa-minus"></i>';
        accordionBlock[index].classList.add('accordion-block_visible');
        item.classList.add('accordion-button_active')
    }
})

showContent.onclick = function() {
    if (showContent.innerHTML === 'show posts') {
        showContent.innerHTML = 'hide posts';
        contentDiv.className = 'content content__visible';
    } else {
        showContent.innerHTML = 'show posts';
        contentDiv.className = 'content';
    }
}

btn.forEach(function(item, index) {
    let elemIsHidden = true;
    item.onclick = function() {
        if (elemIsHidden) {
            item.innerHTML = 'hide';
            hiddenContent[index].className = 'paragraph-block__text_visible';
        } else {
            item.innerHTML = 'read more';
            hiddenContent[index].className = 'paragraph-block__text_hidden';
        }
        elemIsHidden = !elemIsHidden;
    }
})

const stars = document.querySelectorAll('.stars');

function initActiveElem(el) {
    return el.classList.add(`${el.className}_active`);
}

function dotsPerElem(elem) {
    let result = '';
    for (let i = 0; i < elem.length; i++) {
        const block = `<button class = "dots__button"></button>`
        result += block;
    }

    return result;
}


for (let star of stars) {
    let totalData = '';
    for (let i = 0; i < 5; i++) {
        const el = `<span class = "stars__elem"><i class="fa-solid fa-star"></i></span>`;
        totalData += el;
    }
    star.innerHTML = totalData;
}

const contentFromUser = document.createElement('div');
contentFromUser.className = "users-content";
document.body.append(contentFromUser);

const buttonsDiv = document.createElement('div');
buttonsDiv.className = "users-content-buttons";
contentFromUser.append(buttonsDiv);

const userContentDiv = document.createElement('div');
userContentDiv.className = "users-content-box";
contentFromUser.append(userContentDiv);

let count = 1;

const btnAttributes = [
    {
        className: 'content-button content-button_add',
        innerHtml: 'add element',
        onClick: function() {
            if (count < 0) {
                count = 1;
            }

            const newEl = document.createElement('div');
    
            newEl.className = 'users-content-element';
            newEl.innerHTML = count;
    
            const newEls = document.querySelectorAll('.users-content-element')
            let inserted = false;

            newEls.forEach(function(element) {
                if (element.className.includes('users-content-element_active')) {
                    element.insertAdjacentElement('afterend', newEl);
                    inserted = true;
                    count++;
                }
            })
    
            newEl.onclick = function() {
                unactiveAll(this);
                this.classList.toggle('users-content-element_active')
            }
    
            if (!inserted) {
                userContentDiv.append(newEl);
                count++;
            }
        }
    },    
    {   
        className: 'content-button content-button_remove',
        innerHtml: 'remove element',
        onClick: function() {
            const newEl = document.querySelector('.users-content-element')
            const newEls = document.querySelectorAll('.users-content-element')

            if (!newEls.length) {
                alert('nothing to delete');
                return;
            }
            
            let isElRemoved = false;

            newEls.forEach(function(element) {
                if (element.className.includes('users-content-element_active')) {
                    if (element.previousElementSibling) {
                        element.previousElementSibling.classList.add('users-content-element_active');
                    } else {
                        count++;
                    }
                    element.remove();
                    isElRemoved = true;
                }
            })

            if (isElRemoved) {
                count--;
            }

            if (!document.querySelector('.users-content-element_active')) {
                newEl.remove();
                count--;
            }
        }
    },
    {
        className: 'content-button content-button_clone-after',
        innerHtml: 'clone content after element',
        onClick: function() {
            if (!document.querySelector('.users-content-element')) {
                alert('create at least 1 element');
                return;
            }

            const newEls = document.querySelectorAll('.users-content-element')
            const cloneEl  =  document.createElement('div');

            cloneEl.className = 'users-content-element';
            let isCloned = false;

            cloneEl.onclick = function() {
                unactiveAll(this);
                this.classList.toggle('users-content-element_active')
            }

            newEls.forEach(function(element) {
                if (element.className.includes('users-content-element_active')) {
                    element.insertAdjacentElement('afterend', cloneEl);
                    cloneEl.innerHTML = element.innerHTML + 'c';
                    isCloned = true;
                }
            });

            if (!isCloned) {
                cloneEl.innerHTML = newEls[newEls.length - 1].innerHTML + 'c';
                userContentDiv.append(cloneEl);
            }
        }
    },
    {
        className: 'content-button content-button_clone-before',
        innerHtml: 'clone content before element',
        onClick: function() {
            if (!document.querySelector('.users-content-element')) {
                alert('create at least 1 element');
                return;
            }

            const newEls = document.querySelectorAll('.users-content-element')
            const cloneEl  =  document.createElement('div');

            cloneEl.className = 'users-content-element';

            let isCloned = false;
            cloneEl.onclick = function() {

                unactiveAll(this);
                this.classList.toggle('users-content-element_active')

            }

            newEls.forEach(function(element) {
                if (element.className.includes('users-content-element_active')) {
                    element.insertAdjacentElement('beforebegin', cloneEl);
                    cloneEl.innerHTML = element.innerHTML + 'c';
                    isCloned = true;
                }
            });

            if (!isCloned) {
                cloneEl.innerHTML = newEls[0].innerHTML + 'c';
                userContentDiv.prepend(cloneEl);
            }
        }
    },
    {
        className: 'content-button content-button_remove-all',
        innerHtml: 'remove all',
        onClick: function() {
            if (!document.querySelector('.users-content-element')) {
                alert('add elements before removing');
                return;
            }

            const allUsersEl = document.querySelectorAll('.users-content-element');
            const doubleCheck = confirm('Are you sure you want to remove all elements?')

            if (!doubleCheck) {
                return
            }

            allUsersEl.forEach(function(item) {
                item.remove();
                count = 1;
                return;
            })
        }
    }
]

addButtons();

function unactiveAll(currentEl) {
    const newEl = document.querySelectorAll('.users-content-element');

    newEl.forEach(function(item) {
        if (item !== currentEl) {
            item.classList.remove('users-content-element_active')
        }
    })
}

function addButtons() {
    btnAttributes.forEach(function({className, innerHtml, onClick }) {
        const button = document.createElement('button');
        button.className = className;
        button.innerHTML = innerHtml;
        button.addEventListener('click', onClick);

        buttonsDiv.append(button)
    })
}
const addBtn = document.querySelector('.content-button_add');
const removeBtn = document.querySelector('.content-button_remove');
const cloneBeforeBtn = document.querySelector('.content-button_clone-before');
const cloneAfterBtn = document.querySelector('.content-button_clone-before')

addBtn.onclick = function() {
    addBtn.onclick = btnAttributes.onClick;
}

removeBtn.onclick = function() {
    removeBtn.onclick = btnAttributes.onClick
}

cloneBeforeBtn.onclick = function() {
    cloneBeforeBtn.onclick = btnAttributes.onClick
}

cloneAfterBtn.onclick = function() {
    cloneAfterBtn.onclick = btnAttributes.onClick
}